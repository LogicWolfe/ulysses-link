pre-commit:
  parallel: true
  commands:
    fmt:
      glob: "*.rs"
      run: cargo fmt
      stage_fixed: true
    clippy-fix:
      glob: "*.rs"
      run: cargo clippy --fix --allow-dirty --allow-staged -- -D warnings
      stage_fixed: true
    lock-check:
      glob: "Cargo.toml"
      run: cargo check --locked 2>&1 || { echo "Cargo.lock is out of sync with Cargo.toml. Run 'cargo check' to update it."; exit 1; }
